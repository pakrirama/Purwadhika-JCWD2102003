<script>
  let pilihan = 0;
  const keranjang = [];
  const fruits = [
    ["apel", 10, 10000],
    ["jeruk", 5, 5000],
    ["nanas", 8, 5000],
    ["manggis", 7, 5000],
    ["mangga", 9, 5000],
  ];

  function tambahFruits(arrFruits) {
    return fruits.push(arrFruits);
  }

  function beliFruits(fruits, keranjang) {
    let temp = [];

    let buah = prompt("Silahkan nama buah yang ingin dibeli:");
    // for (let i = 0; i < fruits.length; i++) {
    //   temp.push(fruits[i][0]);
    // }
    fruits.forEach(function (val) {
      temp.push(val[0]);
    });

    //check nama buah
    if (!temp.includes(buah)) {
      alert("buah tidak ditemukan");
    }
    if (!keranjang.includes(buah)) {
      keranjang.push(buah);
    }
  }

  function tampilBuah(fruits) {
    let infoBuah = "";
    fruits.forEach((val) => {
      infoBuah += `Buah ${val[0]} Total Stock ${val[1]} Harga Rp.${val[2]} \n`;
    });
    return infoBuah;
  }

  while (pilihan != 5) {
    pilihan = prompt(`
         1. Menampilkan daftar buah2 \n
         2. Menambah buah \n 
         3. Menghapus buah \n
         4. Membeli buah \n 
         5. Exit`);

    //menampilkan isi buah
    if (pilihan == 1) {
      tambahFruits(["melon", 3, 3000]);
      tambahFruits(["Durian", 3, 3000]);

      alert(tampilBuah(fruits));
    } else if (pilihan == 2) {
      beliFruits(fruits, keranjang);
    } else if (pilihan == 3) {
      //menghapus buah
      let Cart = keranjang.length ? keranjang.join(", ") : "";
      let deletedFruits = prompt(
        "Buah apa yang ingin dihapus? \n Daftar keranjang : " + Cart
      );

      if (!keranjang.includes(deletedFruits)) {
        alert(deletedFruits + " tidak ditemukan");
      } else {
        keranjang.splice(keranjang.indexOf(deletedFruits), 1);
      }
    } else if (pilihan == 4) {
      //membeli buah
      let qty = 0;
      let TotalHarga = 0;
      let show = "";
      keranjang.forEach((val) => {
        qty = prompt(`Berapa qty buah ${val} yang ingin dibeli?`);
        fruits.forEach((val) => {
          if (val.includes(keranjang[i])) {
            let hargaSatuan = val[2];
            show += `Buah ${
              keranjang[i]
            } qty ${qty} @Harga Rp.${hargaSatuan} Total Rp.${
              qty * hargaSatuan
            } \n`;
            TotalHarga += qty * hargaSatuan;
          }
        });
      });

      let check = prompt(
        `Apakah Anda Yakin Membeli \n ${show} Total Harga : Rp${TotalHarga} \n 1. Ya \n 2. No`
      );
      if (check == 1) {
        pilihan = 5;
      }
    }
  }
</script>
