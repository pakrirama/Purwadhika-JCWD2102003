<script>
  let pilihan = 0;
  const keranjang = [];
  const fruits = [
    {
      name: "Apel",
      stock: 10,
      price: 10000,
    },
    {
      name: "Jeruk",
      stock: 5,
      price: 5000,
    },
    {
      name: "Nanas",
      stock: 8,
      price: 5000,
    },
    {
      name: "Manggis",
      stock: 7,
      price: 5000,
    },
    {
      name: "Mangga",
      stock: 9,
      price: 5000,
    },
  ];

  function tampilKeranjang(keranjang) {
    infoKeranjang = `Daftar Keanjang : \n `;
    for (let i = 0; i < keranjang.length; i++) {
      infoKeranjang += `${i + 1}. ${keranjang[i]} \n`;
    }
    return infoKeranjang;
  }

  function tampilBuah(fruits) {
    let infoBuah = `Daftar Buah :\n`;
    for (let i = 0; i < fruits.length; i++) {
      infoBuah += `Buah ${fruits[i].name} Total Stock ${fruits[i].stock} Harga Rp.${fruits[i].price} \n`;
    }
    return infoBuah;
  }

  function tambahKeranjang(fruits, keranjang) {
    let temp = [];
    let buah = prompt(
      `${tampilBuah(fruits)}\n\nSilahkan ketik nama buah yang ingin dibeli:`
    );
    for (let i = 0; i < fruits.length; i++) {
      temp.push({ name: fruits[i].name });

      if (!temp[i] == buah) {
        alert("buah tidak ditemukan");
        console.log(temp);
      } else if (!keranjang.includes(buah)) {
        keranjang.push(buah);
        alert(tampilKeranjang(keranjang));
      }
    }
  }

  function hapusKeranjang(keranjang) {
    //menghapus buah

    let deletedFruits = prompt(`${tampilKeranjang(keranjang)} \nHapus Buah:`);

    if (!keranjang.includes(deletedFruits)) {
      alert(deletedFruits + " tidak ditemukan");
    } else {
      keranjang.splice(keranjang.indexOf(deletedFruits), 1);
    }

    alert(tampilKeranjang(keranjang));
  }

  function checoutKeranjang(fruits, keranjang) {
    //membeli buah
    let qty = 0;
    let TotalHarga = 0;
    let show = "";

    for (let i = 0; i < keranjang.length; i++) {
      qty = prompt(`Berapa qty buah ${keranjang[i]} yang ingin dibeli?`);
      for (let k = 0; k < fruits.length; k++) {
        if (fruits[k].name == keranjang[i]) {
          let hargaSatuan = fruits[k].price;

          show += `Buah ${
            keranjang[i]
          } Jumlah: ${qty}, @Harga Rp.${hargaSatuan} Total Rp.${
            qty * hargaSatuan
          } \n`;

          TotalHarga += qty * hargaSatuan;
        }
      }
    }
    let check = prompt(
      `Apakah Anda Yakin Membeli \n${show}Total Harga : Rp${TotalHarga} \n1. Ya \n2. No`
    );
    if (check == 1) {
      pilihan = 5;
    }
  }

  while (pilihan != 5) {
    //balik ke task
    pilihan = prompt(`
         1. Daftar Buah \n
         2. Menambah Keranjang \n 
         3. Menghapus Keranjang \n
         4. Checkout Keranjang \n 
         5. Exit`);

    //menampilkan isi buah
    if (pilihan == 1) {
      alert(tampilBuah(fruits));
    } else if (pilihan == 2) {
      tambahKeranjang(fruits, keranjang);
    } else if (pilihan == 3) {
      hapusKeranjang(keranjang);
    } else if (pilihan == 4) {
      checoutKeranjang(fruits, keranjang);
    }
  }
</script>

//SOAL // - Sekarang market tidak lagi hanya menjual buah, melainkan berbagai
macam produk lainnya. // Produk yang dijual kini memiliki empat jenis berbeda.
Ada produk yang akan digolongkan sebagai fastfood, // kemudian cloth atau
pakaian, elektronik dan juga buah. // Jadi total ada tiga jenis produk baru yang
akan kita jual selain buah. // - Keempat produk memiliki beberapa properties
yang sama. // Dan setiap produk juga akan memiliki properties yang sifatnya
unik, // artinya properties yang hanya ada di satu jenis produk saja. // -
Properties yang akan ada pada semua jenis produk diantaranya : // - category //
- name // - price // - stock // - Properties yang akan ada pada jenis produk
fast food adalah expired : // berisi integer yang menunjukkan tahun dimana
makanan ini tidak lagi layak untuk dikonsumsi // - Properties yang akan ada pada
jenis produk cloth adalah size : // berisi satu buah huruf yang menunjukkan
ukuran dari pakaian, terdapat empat huruf yaitu s, m, l, dan xl // - Properties
yang akan ada pada jenis produk electronic adalah warranty : // berisi string
'yes' atau 'no' untuk menunjukkan bahwa barang tersebut masih memiliki garansi
atau tidak. // - Properties yang akan ada pada jenis produk buah adalah
sugarLevel : // berisi sebuah string yang memiliki tiga buah pilihan yaitu //
'low', 'medium', dan 'high' untuk memberi tahu tingkat kandungan gula yang ada
pada buah // - Karena kini sudah memiliki jenis atau kategori produk. // Saat
akan menambahkan produk baru, maka akan menentukan jenisnya terlebih dahulu
sebelum menginput data lainnya // seperti nama dan harga. Karena setiap jenis
produk memiliki properties uniknya masing - masing. // Maka nantinya pertanyaan
yang muncul juga akan bersifat dinamis atau berbeda disetiap jenisnya. //
Sebagai contoh saat kita sedang menginput produk yang termasuk jenis pakaian, //
maka akan muncul prompt yang akan meminta kita untuk memasukkan informasi size
pakaian tersebut. // Kemudian jika kita sedang mencoba untuk menambahkan produk
jenis elektronik, // maka nanti akan ada pertanyaan mengenai status garansinya.
Kurang lebih seperti itu. // - Mungkin hanya itu saja hal yang baru untuk versi
market kali ini. // Sisanya hanya perlu penyesuaian saja seperti pada proses
belanja hingga user melakukan pembayaran. // Karena sekarang data disimpan sudah
dalam bentuk object, tidak lagi menggunakan array dua dimensi.
